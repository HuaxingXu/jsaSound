<html>
<head>
 <!-- ---------------------------------------------------------------------------
This code demonstrates 
	a) Using a dynamically created list selector to choose sound models,
	b) a dynamically created "Player" to display sliders for sound model parameters
------------------------------------------------------------------------------- -->   

	<!-- #include files for the sound models -->
	<script src="components/jsaAudioComponents.js"></script>
	<script src="utils/utils.js"></script>
	<!-- -->
	
	<!-- list of sound models to incude -->
    <script src="models/OscTest9.js"></script>
	<script src="models/myFM1.js"></script>
	<script src="models/noisyFM.js"></script>
	<script src="models/MetaDrone1.js"></script>
	<script src="models/filteredNoiseBand.js"></script>
	<script src="models/MetaDrone2.js"></script>
	<script src="models/ToneTick.js"></script>
	<script src="models/NoiseTick.js"></script>
	<script src="models/SimpleNoiseTick2.js"></script>
	<script src="models/PeriodicTrigger2.js"></script>
	<script src="models/Mp3.js"></script>
	<!-- -->
	
	<!--  "Player" code -->
	<script src="components/sliderBox.js"></script>
	
	<!--Sound loading and management code-->
	<script type="text/javascript">	
		var currentSndModel;

		window.addEventListener("load", eventWindowLoaded, false);

		function eventWindowLoaded () {

			console.log("Window Loaded");
			// create the sound selector box for the web page
			makeSoundListSelector();
		}				
		
		// Names are arbitrary, makers must be defined in the "#include"ed sound model files above
		soundList = [{},
					 {name: "Square Wave", maker: oscFactory},
					 {name: "Classic FM", maker: jsaFMFactory},
					 {name: "Noisy FM", maker: jsaNoisyFMFactory},
					 {name: "UglyMetadrone", maker: jsaMetaDrone1Factory},
					 {name: "Noise Band", maker: jsaFilteredNoiseBandFactory},
					 {name: "Metadrone2", maker: jsaMetaDrone2Factory},
					 {name: "ToneTick", maker: jsaToneTickFactory},
					 {name: "NoiseTick", maker: jsaNoiseTickFactory},
					 {name: "Simple Noise Tick 2", maker: jsaSimpleNoiseTickFactory2},
					 {name: "Period Trigger 2", maker: jsaPeriodicTriggerFactory2},
					 {name: "mp3 Schumann", maker: mp3Factory}
					 ]
		
		// Create the html select box using the hard-coded soundList above		
		function makeSoundListSelector(){
			var select = document.getElementById("soundList");
			var foo;
			for (var i=0; i< soundList.length;i++){
				foo = soundList[i].name;
				if (soundList[i].name){
					select.options[select.options.length] = new Option(soundList[i].name);
				} else{
					select.options[select.options.length] = new Option();
				}					
			}
		}
		
		// responde to sound selections be loading a sound as the current model
		function soundChoice() {
			var sb;
			var mylist=document.getElementById("soundList");
			currentSndModel=soundList[mylist.selectedIndex].maker();  
			sb = makeSliderBox(currentSndModel);
			console.log("slider box is " + sb + " + and model is " + currentSndModel);
		}		
	</script>
</head>
<body>
<h1> Dynamically create model gui with sliders and text boxes for parameters </h1> 

<!-- Here we will dnamically create the sound list for selection -->
Choose your sound model:
<select id="soundList" onchange="soundChoice()">
</select> </br>
<!-- ---------------------------------------------------------------------------------------- -->


</body>
</html>
